{% extends 'index.html' %}
{% block main_content %}

<div class="max-w-7xl mx-auto mt-10 bg-white shadow-lg rounded-2xl p-6 md:p-10 grid grid-cols-1 md:grid-cols-3 gap-8">

  <!-- Left: Product Images -->
  <div class="col-span-1 md:col-span-1">
    {% if product.image %}
      <div class="border rounded-xl overflow-hidden mb-4">
        <img src="{{ product.image.url }}" alt="{{ product.name }}"
             class="w-full h-[400px] object-contain hover:scale-105 transition-transform duration-300" />
      </div>
    {% else %}
      <div class="w-full h-64 flex items-center justify-center border border-gray-200 rounded-lg bg-gray-50 text-gray-400">
        No Image Available
      </div>
    {% endif %}

    <!-- Thumbnail images placeholder (if you have multiple images) -->
    <div class="flex gap-2 mt-4">
      {% for img in product.images.all %}
        <img src="{{ img.url }}" class="w-16 h-16 object-contain border rounded-lg hover:border-orange-500 cursor-pointer transition" />
      {% endfor %}
    </div>
  </div>

  <!-- Center: Product Info -->
  <div class="col-span-1 md:col-span-2 flex flex-col justify-between">

    <!-- Title and Category -->
    <div>
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">{{ product.name }}</h1>
      <p class="text-sm text-gray-600 mb-3">
        Category: <span class="text-orange-500 font-semibold">{{ product.category.name }}</span>
      </p>

      <!-- Ratings Placeholder -->
      <div class="flex items-center gap-2 mb-4">
        <div class="flex text-yellow-400">
          â˜…â˜…â˜…â˜…â˜†
        </div>
        <span class="text-sm text-gray-500">(120 Reviews)</span>
      </div>

      <!-- Price -->
      <div class="mb-4">
        <span class="text-4xl md:text-5xl font-extrabold text-orange-600">Rs. {{ product.price }}</span>
      </div>

      <!-- Stock Status -->
      <p class="mb-4">
        {% if product.available %}
          <span class="text-green-600 font-semibold">In Stock ({{ product.stock }} available)</span>
        {% else %}
          <span class="text-red-500 font-semibold">Out of Stock</span>
        {% endif %}
      </p>
    </div>

    <!-- Quantity Selector -->
    <div class="flex items-center gap-4 mb-6">
      <label class="text-gray-800 font-medium">Quantity:</label>
      <div class="flex items-center gap-2">
        <button type="button" id="decrease" class="w-10 h-10 bg-gray-100 border rounded-full flex items-center justify-center hover:bg-gray-200">âˆ’</button>
        <input type="number" id="quantity" name="quantity" value="1" min="1" max="{{ product.stock }}" class="w-20 text-center border rounded-md py-2 focus:ring-orange-400" />
        <button type="button" id="increase" class="w-10 h-10 bg-gray-100 border rounded-full flex items-center justify-center hover:bg-gray-200">+</button>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex flex-col sm:flex-row gap-4">
      <a href="{% url 'add_to_cart' product.id %}" class="flex-1">
        <button class="w-full bg-orange-500 text-white py-3 rounded-lg font-medium shadow hover:bg-orange-600 transition">ðŸ›’ Add to Cart</button>
      </a>
      <a href="{}" class="flex-1">
        <button class="w-full bg-green-500 text-white py-3 rounded-lg font-medium shadow hover:bg-green-600 transition">âš¡ Buy Now</button>
      </a>
    </div>

    <!-- Product Description -->
    <div class="mt-8">
      <h2 class="text-xl font-semibold text-gray-800 mb-3">Product Description</h2>
      <p class="text-gray-700 leading-relaxed whitespace-pre-line">{{ product.description }}</p>
    </div>

    <!-- Meta Info -->
    <div class="mt-6 text-sm text-gray-500 grid grid-cols-1 md:grid-cols-2 gap-2">
      <p>ðŸ•’ Created on: <span class="text-gray-800 font-medium">{{ product.created_at|date:"F j, Y" }}</span></p>
      <p>ðŸ§­ Last updated: <span class="text-gray-800 font-medium">{{ product.updated_at|date:"F j, Y" }}</span></p>
    </div>

  </div>
</div>

<!-- Optional: Related Products / You May Also Like -->
<div class="max-w-7xl mx-auto mt-12">
  <h2 class="text-2xl font-bold mb-6">You May Also Like</h2>
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6">
    {% for item in related_products %}
      <div class="bg-white border rounded-xl p-4 hover:shadow-lg transition">
        <a href="{% url 'product_detail' item.id %}">
          <img src="{{ item.image.url }}" class="w-full h-48 object-contain mb-2" />
          <h3 class="text-gray-800 font-medium text-sm mb-1">{{ item.name }}</h3>
          <p class="text-orange-500 font-semibold text-sm">Rs. {{ item.price }}</p>
        </a>
      </div>
    {% endfor %}
  </div>
</div>

{% endblock %}
